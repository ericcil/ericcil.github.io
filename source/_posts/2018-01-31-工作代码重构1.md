---
title: 工作代码重构1
date: 2018-01-31 22:03:42
tags: 重构
category: 工作实践
---

###


<!-- more -->

&emsp;&emsp;想写点总结的时候，大多都发现没什么好写的，归根结底还是自己的沉淀还不够。上周，由于忍受不了原来零散又重复的校验调用，趁着迭代的时候对系统的一部分功能进行了重构。
&emsp;&emsp;由于业务场景需要，在用户下单前需要做一系列校验，例如：黑名单、可交单、征信等等。又由于校验间存在先后顺序关系，在原有实现里，就出现了深层的if else调用。同时在校验未通过的时候需要进行不同的记录。在多次需求迭代之后，虽然下单的业务没有特别大的变化，但是代码却表现的异常冗余。
&emsp;&emsp;由于校验的性质，我考虑到是使用责任链的典型场景，将其中的规则抽象为一个个的rule，提供一个ruleService，维护不同场景下的rule list，并且结合spring让其可配置。调用方只需要描述要执行的rule list，ruleService就可以提供服务，当需要添加规则时，也只需要增加rule的实现类，对其配置，无需改动调用方代码和ruleService,让校验的执行和调用方业务解耦。
&emsp;&emsp;代码的连接之后会补充上来
