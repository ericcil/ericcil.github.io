---
title: 架构学习
date: 2018-05-10 20:16:34
tags:
category:
---

###


<!-- more -->

&emsp;&emsp;
* 架构的目的：解决软件复杂度带来的系列问题
架构的主要目的不是为了达成 高性能、高可用、高扩展 等特点，而是对系统的复杂点进行针对性的设计，解决降低甚至解决系统复杂度

* 复杂度来源
- 高性能（衡量指标包含：响应时间、TPS、资源利用率等
    单机：
        单CPU解决方案：分时系统，多CPU解决方案：SMP,NUMA,MPP
        进程：分配资源的最小单元
        线程：cpu调用的最小单元
        进程间通信：管道，消息队列，信号量，共享内存
    集群：
        任务分配器
            硬件网络设备：F5、交换机
            软件网络设备：LVS
            负载均衡软件：Nginx、HAProxy
            分配算法：轮询、权重、负载
    业务-任务分解：
    I\O：

- 高可用（无中断执行能力
    冗余处理单元（集群
    计算高可用：复杂度在于任务分配器
    存储高可用：复杂度在于数据一致性
        数据传输延迟、错包、丢包、
        CAP定理：一致性、可用性、分区容错性最多只能同时满足两点
    高可用状态决策（计算高可用、存储高可用 基础都是“状态决策”
        独裁式、
        协商式：主备决策
        民主式（Raft、Paxos...）：存在脑裂问题，连接中断造成原集群分裂为两个子集群，选出各自的主节点，对于系统出现了两个主节点


- 高扩展
    预测变化
    封装变化（设计模式