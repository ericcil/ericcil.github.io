---
title: 数据库事务浅谈
date: 2018-07-10 09:22:34
tags: 事务
category: 数据库
---

###


<!-- more -->
##类加载机制
类的加载指 .class文件中的二进制数据读到内存中，将其放在运行时数据区的方法区内，然后在堆区创建一个java.lang.Class对象，用来封装类在方法区内的数据结构。
>.class文件 --> 方法区 --> 堆
JVM规范允许类加载器在预料到某个类将被使用，预先加载该类，如果预先加载过程遇到错误，类加载器必须在程序首次主动使用该类时报告错误（LinkageError）

类加载方式：
- 从本地系统加载
- 通过网络下载.class
- 从zip，jar等归档文件中加载
- 从专有数据库中提取.class
- 将java源文件动态编译为.class


###类生命周期
>类的加载过程
加载（loading） --> 验证(verification) --> 准备(preparation) --> 解析(resolution) --> 初始化(initialization)
生命周期还包含
--> 使用(using) --> 卸载(unloading)

加载过程中加载、验证、准备和初始化这四个阶段发生顺序是确定的，解析则不一定，某系情况下可以在初始化阶段之后开始（为了支持动态绑定）。

1. 加载
    - 通过类的全限定名获取二进制字节流
    - 将字节流代表的静态存储结构转为方法区的运行时数据结构
    - 在堆中生成一个改类的java.lang.Class对象，作为方法区中数据的访问入口    
2. 